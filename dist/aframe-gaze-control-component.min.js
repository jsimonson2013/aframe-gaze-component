!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e){var i=Math.PI/2;if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("gaze-control",{dependencies:["position","rotation"],schema:{enabled:{default:!0}},init:function(){this.previousPosition=new THREE.Vector3,this.deltaPosition=new THREE.Vector3,this.pitchObject=new THREE.Object3D,this.yawObject=new THREE.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject),this.dolly=new THREE.Object3D,this.euler=new THREE.Euler,this.zeroQuaternion=new THREE.Quaternion,this.onGazeMove=this.onGazeMove.bind(this)},update:function(){this.data.enabled&&(this.updateOrientation(),this.updatePosition())},play:function(){this.previousPosition.set(0,0,0),this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(t){this.update()},remove:function(){this.pause()},addEventListeners:function(){var t=this.el.sceneEl,e=t.canvas;return e?void e.addEventListener("gazemove",this.onGazeMove):void t.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var t=document.querySelector("a-scene"),e=t&&t.canvas;e&&e.removeEventListener("gazemove",this.onGazeMove)},updateOrientation:function(){var t=new THREE.Euler;return t.order="YXZ",function(){var e=this.pitchObject,i=this.yawObject,n=this.calculateHMDQuaternion();t.setFromQuaternion(n),this.el.setAttribute("rotation",{x:THREE.Math.radToDeg(t.x)+THREE.Math.radToDeg(e.rotation.x),y:THREE.Math.radToDeg(t.y)+THREE.Math.radToDeg(i.rotation.y),z:THREE.Math.radToDeg(t.z)})}}(),calculateHMDQuaternion:function(){var t=new THREE.Quaternion;return function(){var e=this.dolly;return this.zeroed||e.quaternion.equals(this.zeroQuaternion)||(this.zeroOrientation(),this.zeroed=!0),t.copy(this.zeroQuaternion).multiply(e.quaternion),t}}(),updatePosition:function(){var t=this.el,e=this.calculateDeltaPosition(),i=t.getAttribute("position");t.setAttribute("position",{x:i.x+e.x,y:i.y+e.y,z:i.z+e.z})},calculateDeltaPosition:function(){var t=this.dolly,e=this.deltaPosition,i=this.previousPosition;return e.copy(t.position),e.sub(i),i.copy(t.position),e},updateHMDQuaternion:function(){var t=new THREE.Quaternion;return function(){var e=this.dolly;return this.controls.update(),this.zeroed||e.quaternion.equals(this.zeroQuaternion)||(this.zeroOrientation(),this.zeroed=!0),t.copy(this.zeroQuaternion).multiply(e.quaternion),t}}(),zeroOrientation:function(){var t=new THREE.Euler;t.setFromQuaternion(this.dolly.quaternion.clone().inverse()),t.z=0,t.x=0,this.zeroQuaternion.setFromEuler(t)},onGazeMove:function(t){var e=window.innerWidth,n=window.innerHeight,o=n/4,a=e/6,r=25;if(this.data.enabled){if(t.detail.x>0&&t.detail.x<a&&t.detail.y>0&&t.detail.y<o)var s=-r,d=-r;else if(t.detail.x>a&&t.detail.x<e-a&&t.detail.y>0&&t.detail.y<o)var s=0,d=-r;else if(t.detail.x>e-a&&t.detail.x<e&&t.detail.y>0&&t.detail.y<o)var s=r,d=-r;else if(t.detail.x>0&&t.detail.x<a&&t.detail.y>o&&t.detail.y<n-o)var s=-r,d=0;else if(t.detail.x>e-a&&t.detail.x<e&&t.detail.y>o&&t.detail.y<n-o)var s=r,d=0;else if(t.detail.x>0&&t.detail.x<a&&t.detail.y>n-o&&t.detail.y<n)var s=-r,d=r;else if(t.detail.x>a&&t.detail.x<e-a&&t.detail.y>n-o&&t.detail.y<n)var s=0,d=r;else if(t.detail.x>e-a&&t.detail.x<e&&t.detail.y>n-o&&t.detail.y<n)var s=r,d=r;else var s=0,d=0;this.previousGazeEvent=t,this.yawObject.rotation.y-=.002*s,this.pitchObject.rotation.x-=.002*d,this.pitchObject.rotation.x=Math.max(-i,Math.min(i,this.pitchObject.rotation.x))}}})}]);